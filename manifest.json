
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Login - Seguimiento</title>
<link rel="manifest" href="manifest.json" />
<script type="module" src="js/app.js"></script>
</head>
<body>
<h2>Inicio de SesiÃ³n</h2>
<input id="user" placeholder="Usuario" />
<input id="pass" type="password" placeholder="ContraseÃ±a" />
<button id="loginBtn">Ingresar</button>
<div id="msg"></div>
</body>
</html>
```

---

## ðŸ“Œ admin.html (Panel Administrador)

```html
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Panel Administrador</title>
<script type="module" src="js/admin.js"></script>
</head>
<body>
<h2>Panel Administrador</h2>
<button id="nuevoViaje">Crear Viaje</button>
<div id="listaViajes"></div>

<h3>Mapa en tiempo real</h3>
<div id="map" style="width:100%; height:400px; background:#ddd"></div>
</body>
</html>
```

---

## ðŸ“Œ chofer.html (Chofer)

```html
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Chofer</title>
<script type="module" src="js/chofer.js"></script>
</head>
<body>
<h2>Mis Viajes</h2>
<div id="viajes"></div>
<br>
<div id="estadoViaje"></div>
</body>
</html>
```

---

## ðŸ“Œ js/app.js (Login real con Firebase)

```javascript
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

const firebaseConfig = {
   apiKey: "TU_API_KEY",
   authDomain: "TU_PROJECT.firebaseapp.com",
   projectId: "TU_PROJECT"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const btn = document.getElementById("loginBtn");
btn.onclick = login;

async function login() {
  const u = document.getElementById("user").value;
  const p = document.getElementById("pass").value;

  const ref = doc(db, "usuarios", u);
  const snap = await getDoc(ref);

  if (!snap.exists()) {
    msg.innerText = "Usuario no existe";
    return;
  }

  const data = snap.data();

  if (data.pass !== p) {
    msg.innerText = "ContraseÃ±a incorrecta";
    return;
  }

  // RedirecciÃ³n segÃºn rol
  if (data.rol === "admin") window.location = "admin.html";
  else window.location = "chofer.html";
}
```

---

## ðŸ“Œ js/admin.js (Administrador â€“ crea viajes y ve mapa)

```javascript
import { getFirestore, collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";

const app = initializeApp({ projectId: "TU_PROJECT" });
const db = getFirestore(app);

const lista = document.getElementById("listaViajes");

// Escucha viajes
onSnapshot(collection(db, "viajes"), (qs) => {
  lista.innerHTML = "";
  qs.forEach(doc => {
    const v = doc.data();
    lista.innerHTML += `<div><b>${v.chofer}</b> â†’ ${v.destinos.length} destinos</div>`;
  });
});

// Crear viaje bÃ¡sico
const btn = document.getElementById("nuevoViaje");
btn.onclick = async () => {
  await addDoc(collection(db, "viajes"), {
    chofer: "chofer1",
    origen: { lat:0, lng:0 },
    destinos: [],
    estado: "pendiente"
  });
};
```

---

## ðŸ“Œ js/chofer.js (Chofer â€“ seguimiento cada 10 min)

```javascript
import { getFirestore, collection, query, where, onSnapshot, updateDoc, doc } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";

const app = initializeApp({ projectId: "TU_PROJECT" });
const db = getFirestore(app);

const viajesDiv = document.getElementById("viajes");

const q = query(collection(db, "viajes"), where("chofer", "==", "chofer1"));

onSnapshot(q, (qs) => {
  viajesDiv.innerHTML = "";
  qs.forEach(d => {
    const v = d.data();
    viajesDiv.innerHTML += `<button onclick="iniciar('${d.id}')">Iniciar viaje</button>`;
  });
});

window.iniciar = async (id) => {
  const ref = doc(db, "viajes", id);

  setInterval(() => {
    navigator.geolocation.getCurrentPosition(async (pos) => {
      await updateDoc(ref, {
        ultimaPos: {
          lat: pos.coords.latitude,
          lng: pos.coords.longitude,
          hora: Date.now()
        }
      });
    });
  }, 10 * 60 * 1000); // 10 minutos
};
```

---

## ðŸ“Œ manifest.json

```json
{
  "name": "Seguimiento de viajes",
  "short_name": "Viajes",
  "start_url": "/index.html",
  "display": "standalone",
  "background_color": "#ffffff",
  "theme_color": "#000000",
  "icons": []
}
```

---

## ðŸ“Œ sw.js (Service Worker bÃ¡sico)

```javascript
self.addEventListener("install", e => {
  console.log("SW instalado");
});

self.addEventListener("fetch", () => {});
```

---

## ðŸ“Œ css/style.css

```css
body {
  font-family: Arial;
  padding: 20px;
}
button {
  padding: 10px;
  margin-top: 10px;
  cursor: pointer;
}
```

---

Si querÃ©s, puedo ahora **completar con Firebase REAL, geolocation completa, Google Maps, y un flujo de viajes real** â€” dejÃ¡melo saber.
